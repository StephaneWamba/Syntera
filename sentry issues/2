# Failed to save message

**Issue ID:** 84298180
**Project:** syntera
**Date:** 12/20/2025, 5:24:01 PM
## Issue Summary
Message Saving Failures Linked to Session/Config Issues
**What's wrong:** Multiple **failed to save message** errors from `message_saver` category. Agent state transitions occur around these errors.
**In the trace:** Encountered **unclosed client session** and **missing languages.json** file.
**Possible cause:** The **message_saver** may be failing due to issues with the **aiohttp client session** or missing configuration files.

## Tags

- **environment:** production
- **level:** error
- **logger:** message_saver
- **release:** 1.0.1
- **runtime:** CPython 3.10.15
- **runtime.name:** CPython
- **server_name:** 73f507eda040




# Unclosed client session

**Issue ID:** 84298339
**Project:** syntera
**Date:** 12/20/2025, 5:24:22 PM
## Issue Summary
Unclosed Client Session Causing 404 Errors
**What's wrong:** Unclosed **aiohttp client session**; multiple **404 Not Found** errors from `chat-service-production.up.railway.app`.
**In the trace:** Multiple **404 errors** during message creation and retrieval, potentially linked to the unclosed session.
**Possible cause:** The **unclosed client session** may be preventing proper resource cleanup, leading to subsequent **HTTP 404 errors**.

## Tags

- **environment:** production
- **level:** error
- **logger:** asyncio
- **release:** 1.0.1
- **runtime:** CPython 3.10.15
- **runtime.name:** CPython
- **server_name:** 73f507eda040


# Could not find file "languages.json". Make sure you have downloaded the model before running the agent. Use `python3 your_agent.py download-files` to download the model.

**Issue ID:** 84298168
**Project:** syntera
**Date:** 12/20/2025, 5:22:26 PM
## Issue Summary
Agent Missing **languages.json**: Model Download Required
**What's wrong:** Agent failed to find **languages.json**. Requires model download via `download-files` command.
**In the trace:** Multiple **failed to save message** errors and an **unclosed client session**.
**Possible cause:** The agent's **model files are missing**, preventing it from accessing necessary language data.

## Tags

- **environment:** production
- **level:** error
- **logger:** livekit.plugins.turn_detector
- **release:** 1.0.1
- **runtime:** CPython 3.10.15
- **runtime.name:** CPython
- **server_name:** 73f507eda040



# RuntimeError: livekit-plugins-turn-detector initialization failed. Could not find file "model_q8.onnx".

**Issue ID:** 84298116
**Project:** syntera
**Date:** 12/20/2025, 5:21:35 PM
## Issue Summary
LiveKit Turn Detector Initialization Failure: Missing 'model_q8.onnx'
**What's wrong:** RuntimeError: **livekit-plugins-turn-detector** failed to initialize, **'model_q8.onnx' not found**.
**In the trace:** N/A
**Possible cause:** The **'model_q8.onnx' file** was likely not downloaded or is missing from the expected path, preventing the **turn detector** from initializing.

## Tags

- **environment:** production
- **handled:** yes
- **level:** error
- **logger:** livekit.agents
- **mechanism:** logging
- **release:** 1.0.1
- **runtime:** CPython 3.10.15
- **runtime.name:** CPython
- **server_name:** 73f507eda040

## Exception

### Exception 1
**Type:** RuntimeError
**Value:** livekit-plugins-turn-detector initialization failed. Could not find file "model_q8.onnx".

#### Stacktrace

```
 _download_from_hf_hub in /opt/venv/lib/python3.10/site-packages/livekit/plugins/turn_detector/base.py [Line 40] (Not in app)
        logger.error(
            f'Could not find file "{filename}". '
            "Make sure you have downloaded the model before running the agent. "
            "Use `python3 your_agent.py download-files` to download the model."
        )
        raise RuntimeError(  <-- SUSPECT LINE
            "livekit-plugins-turn-detector initialization failed. "
            f'Could not find file "{filename}".'
        ) from None
    return local_path

---
Variable values:
{
  "filename": "'model_q8.onnx'",
  "hf_hub_download": "<function hf_hub_download at 0x7fbd25553760>",
  "kwargs": {
    "local_files_only": "True",
    "revision": "'v0.4.1-intl'",
    "subfolder": "'onnx'"
  },
  "repo_id": "'livekit/turn-detector'"
}

=======
 initialize in /opt/venv/lib/python3.10/site-packages/livekit/plugins/turn_detector/base.py [Line 117] (Not in app)
        finally:
            logger.removeFilter(filt)

        revision = self.__class__.model_revision()
        try:
            local_path_onnx = _download_from_hf_hub(  <-- SUSPECT LINE
                HG_MODEL,
                ONNX_FILENAME,
                subfolder="onnx",
                revision=revision,
                local_files_only=True,
---
Variable values:
{
  "AutoTokenizer": "[Filtered]",
  "_SuppressSpecific": "<class 'livekit.plugins.turn_detector.base._EUORunnerBase.initialize.<locals>._SuppressSpecific'>",
  "errors": "<module 'huggingface_hub.errors' from '/opt/venv/lib/python3.10/site-packages/huggingface_hub/errors.py'>",
  "filt": "<livekit.plugins.turn_detector.base._EUORunnerBase.initialize.<locals>._SuppressSpecific object at 0x7fbd24d5fa60>",
  "logger": "<Logger transformers (WARNING)>",
  "ort": "<module 'onnxruntime' from '/opt/venv/lib/python3.10/site-packages/onnxruntime/__init__.py'>",
  "revision": "'v0.4.1-intl'",
  "self": "<livekit.plugins.turn_detector.multilingual._EUORunnerMultilingual object at 0x7fbd4a1c7bb0>"
}

=======
 initialize in /opt/venv/lib/python3.10/site-packages/livekit/agents/ipc/inference_proc_lazy_main.py [Line 69] (Not in app)
                logger.debug(
                    "initializing inference runner",
                    extra={"runner": runner.__class__.INFERENCE_METHOD},
                )
                start_time = time.perf_counter()
                runner.initialize()  <-- SUSPECT LINE
                logger.debug(
                    "inference runner initialized",
                    extra={
                        "runner": runner.__class__.INFERENCE_METHOD,
                        "elapsed_time": time.perf_counter() - start_time,
---
Variable values:
{
  "client": "<livekit.agents.ipc.proc_client._ProcClient object at 0x7fbd24d5f940>",
  "init_req": "InitializeRequest(asyncio_debug=False, ping_interval=5.0, ping_timeout=60.0, high_ping_threshold=2.5, http_proxy='')",
  "runner": "<livekit.plugins.turn_detector.multilingual._EUORunnerMultilingual object at 0x7fbd4a1c7bb0>",
  "self": "<livekit.agents.ipc.inference_proc_lazy_main._InferenceProc object at 0x7fbd4a23baf0>",
  "start_time": "19000559.047520734"
}

=======
```



# Could not find file "model_q8.onnx". Make sure you have downloaded the model before running the agent. Use `python3 your_agent.py download-files` to download the model.

**Issue ID:** 84298115
**Project:** syntera
**Date:** 12/20/2025, 5:21:35 PM
## Issue Summary
Missing Model File: **model_q8.onnx**
**What's wrong:** Agent initialization failed: **model_q8.onnx** not found. **Download files** command was not executed.
**In the trace:** The main issue stems from a nested error during **livekit-plugins-turn-detector** initialization.
**Possible cause:** The **download-files** step was likely skipped or failed, preventing the model from being present.

## Tags

- **environment:** production
- **level:** error
- **logger:** livekit.plugins.turn_detector
- **release:** 1.0.1
- **runtime:** CPython 3.10.15
- **runtime.name:** CPython
- **server_name:** 73f507eda040




